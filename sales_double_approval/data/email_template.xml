<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- Email Template for Quotation Approval Request - Updated Odoo 18 Syntax -->
        <record id="email_template_quotation_approval_request" model="mail.template">
            <field name="name">Quotation Approval Required</field>
            <field name="model_id" ref="sale.model_sale_order"/>
            <field name="subject">{{ object.company_id.name }} Quotation Approval Required (Ref {{ object.name or 'n/a' }})</field>
            <field name="email_from">{{ (object.user_id.email_formatted or object.company_id.email_formatted or user.email_formatted) }}</field>
            <field name="partner_to">{{ ctx.get('approver_id', False) }}</field>
            <field name="description">Used when quotation needs approval from manager</field>
            <field name="auto_delete" eval="False"/>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <t t-set="doc_name" t-value="'quotation' if object.state in ('draft', 'sent') else 'order'"/>
                        Hello <t t-out="ctx.get('approver_name', 'Approver')">Approver</t>,
                        <br/><br/>
                        
                        A new <t t-out="doc_name or ''">quotation</t> requires your <strong>review and approval</strong> before this quotation can be confirmed as a Sales Order.
                        <br/><br/>
                    </p>
                    
                    <div style="padding: 20px; background-color: #f9f9f9; font-family: Arial, sans-serif;">
                        <div style="max-width: 600px; margin: 0 auto; background-color: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            
                            <!-- Header -->
                            <div style="background-color: #ffc107; padding: 20px; text-align: center;">
                                <h1 style="color: #333; margin: 0; font-size: 24px;">üìã Quotation Approval Required</h1>
                            </div>
                            
                            <!-- Content -->
                            <div style="padding: 30px;">
                                <p style="font-size: 16px; color: #333; margin-bottom: 20px;">
                                    Dear <strong><t t-out="ctx.get('approver_name', 'Approver')">Approver</t></strong>,
                                </p>
                                
                                <p style="font-size: 16px; color: #333; line-height: 1.6;">
                                    A new quotation requires your <strong>review and approval</strong> before this quotation can be confirmed as a Sales Order.
                                </p>
                                
                                <!-- Quotation Details Box -->
                                <div style="background-color: #f8f9fa; border-left: 4px solid #ffc107; padding: 20px; margin: 20px 0;">
                                    <h3 style="color: #333; margin: 0 0 15px 0;">üìã Quotation Details:</h3>
                                    <table style="width: 100%; border-collapse: collapse;">
                                        <tr>
                                            <td style="padding: 8px 0; font-weight: bold; color: #555; width: 30%;">‚óè Customer:</td>
                                            <td style="padding: 8px 0; color: #333;" t-out="object.partner_id.name or 'N/A'">Customer</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px 0; font-weight: bold; color: #555;">‚óè Order Number:</td>
                                            <td style="padding: 8px 0; color: #333;" t-out="object.name or 'N/A'">Order</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px 0; font-weight: bold; color: #555;">‚óè Quotation Amount:</td>
                                            <td style="padding: 8px 0; color: #333; font-size: 18px; font-weight: bold; color: #28a745;">
                                                <t t-set="currency_symbol" t-value="object.currency_id.symbol or '$'"/>
                                                <t t-set="amount_total" t-value="object.amount_total or 0"/>
                                                <t t-out="currency_symbol">$</t><t t-out="'{:,.2f}'.format(float(amount_total))">0.00</t>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px 0; font-weight: bold; color: #555;">‚óè Created By:</td>
                                            <td style="padding: 8px 0; color: #333;" t-out="object.user_id.name or 'System'">User</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px 0; font-weight: bold; color: #555;">‚óè Date:</td>
                                            <td style="padding: 8px 0; color: #333;">
                                                <t t-set="order_date" t-value="object.date_order"/>
                                                <t t-if="order_date">
                                                    <t t-out="order_date.strftime('%d/%m/%Y')">24/09/2025</t>
                                                </t>
                                                <t t-else="">
                                                    <t t-out="datetime.datetime.now().strftime('%d/%m/%Y')">24/09/2025</t>
                                                </t>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                
                            
                                
                                <p style="font-size: 16px; color: #333; line-height: 1.6;">
                                    Kindly review the quotation at your earliest convenience and proceed with <strong>Approval</strong>.
                                </p>
                                
                                <p style="font-size: 14px; color: #666; margin-top: 30px;">
                                    Best regards,<br/>
                                    <strong><t t-out="user.company_id.name or object.company_id.name or 'Your Company'">Company</t></strong>
                                </p>
                                
                                <!-- Company Contact Info (Optional) -->
                                <t t-if="object.company_id">
                                    <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #eee; font-size: 12px; color: #666;">
                                        <t t-if="object.company_id.phone">
                                            <p style="margin: 2px 0;">üìû <t t-out="object.company_id.phone">Phone</t></p>
                                        </t>
                                        <t t-if="object.company_id.email">
                                            <p style="margin: 2px 0;">‚úâÔ∏è <t t-out="object.company_id.email">Email</t></p>
                                        </t>
                                        <t t-if="object.company_id.website">
                                            <p style="margin: 2px 0;">üåê <a t-att-href="object.company_id.website" t-out="object.company_id.website">Website</a></p>
                                        </t>
                                    </div>
                                </t>
                            </div>
                            
                            <!-- Footer -->
                            <div style="background-color: #f8f9fa; padding: 20px; text-align: center; border-top: 1px solid #dee2e6;">
                                <p style="margin: 0; font-size: 12px; color: #666;">
                                    This is an automated notification for quotation approval.
                                    <br/>
                                    <t t-set="current_datetime" t-value="datetime.datetime.now()"/>
                                    Generated on: <t t-out="current_datetime.strftime('%d/%m/%Y at %H:%M')">24/09/2025 at 11:59</t>
                                </p>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </field>
        </record>
    </data>
</odoo>

